{% extends "layout/base.html" %}

<!-- FOR MODAL -->
    <script type="text/javascript" src="{{ url_for('static', filename='vendor/jquery/dist/jquery.min.js') }}"></script>

<script>
$(function (){
$('[data-toggle="modal"]')
.popover({trigger: 'click', html: 'true', placement: "bottom"})
.click(function(e) {e.preventDefault();});
});
</script>



{% block content %}


  <div id="wrap">
    <div class="container">
      <div class="starter-template">
        <h1>RxFx</h1>
        
<!--         START LARGE ROW UPPER-->
        <div class="row">
<!--         START LEFT HAND COLUMNS OF LARGE ROW UPPER-->
			<div class="col-sm-7 col-md-7 col-lg-7"><dl>
		
		<!-- 	BEGIN ROWS OF FIRST COLUMN OF LARGE ROW UPPER-->
				<div class="row">
					<p class="lead"> Prescription Drug Side Effects </p>
				</div>        
				<div class="row">
						<p>Get recommended Rx based on personalized tolerance/intolerance of side effects</p>
				</div>

				<form method=post action="{{ url_for('RxFx') }}" >


		<!-- 	INDICATION DROPDOWN	ROW	 -->	
				<div class="row">

					<dt><p>Indication:</p></dt>
					<select name="indication">
			
						{% for i in range(0, (indications|length) ) %}
							<option value="{{indications[i]}}" 
								{% if indication == "indications[i]" %} selected {% endif %}
								> "{{indications[i]}}" </option>			
						{% endfor %}

					</select>
					<input type=submit value=Search>
				</div>	 <!-- END INDICATIONS DROP DOWN ROW-->

		<!-- 	N SIDE EFFECTS DROPDOWN	ROW -->		
				<div class="row">
					<dt><p>Number of Side Effects:</p></dt>
					<select name="n_side_effects">
						<!-- THIS SETS THE RANGE OF VALUES FOR THE NUMBER OF SIDE EFFECTS TO USE -->
						{% for i in range(5,16) %}
							<option value={{i}} {% if i == n_effects %} selected {% endif %} > {{i}} </option>
						{% endfor %}
					</select>
					<input type=submit value=Search>
				</div> <!-- END N SIDE EFFECTS  DROP DOWN ROW-->
		


		<!-- 		ROW FOR RECOMMENDATION -->
				<div class="row">
	

					<h3>Recommend:<sp>
				
						{% if not recommendation == "" %}
						{{ recommendation }} for {{ indication }}				
							<button class="btn btn-primary btn-xs" data-toggle="modal" data-target="#myModal">
							Details
							</button>
						{% endif %}
					</h3>
			
					<!-- Modal -->
					<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
					  <div class="modal-dialog">
						<div class="modal-content">
						  <div class="modal-header">
							<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
							<h4 class="modal-title" id="myModalLabel">{{ recommendation }}</h4>
						  </div>
						  <div class="modal-body">
							<div class=container >
								<div class="row">
									<div class="col-md-3">
									<!-- SINGLE PLOT FIGURE -->
									<img class="img-responsive img-rounded" 
									src="{{ url_for('single_effect_png', data_string=single_plot_data_json) }}" style="margin-left:auto margin-right:auto" />
									</div>
								</div>
							</div>
						  </div>
	  
						  <div class="modal-footer">
							<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
						  </div>
						</div>
					  </div>
					</div>			
					<!-- End Modal -->
			
			
					<h4>
					Close alternatives:<sp>
					{% for i in range(0, (alternates|length)) %}
						{{ alternates[i] }}{% if i < (alternates|length)-1 %},<sp>{% endif %}
					{% endfor %}
					</h4>

			</div>   <!-- END ROWS FOR RECS AND ALTERNATIVES -->


		
			</div> <!-- END COLUMN ONE -->

		<!-- 	END FIRST COLUMNS OF LARGE ROW -->

			<div class="col-sm-5 col-md-5 col-lg-5">
				<!-- SINGLE PLOT FIGURE -->
				<img class="img-responsive img-rounded" 
				src="{{ url_for('single_effect_png', data_string=single_plot_data_json) }}" style="margin-left:auto margin-right:auto" />
			</div>






	<!~~ Add the extra clearfix for only the required viewport ~~>
	<div class="clearfix visible-xs">
	</div>

	<div class="row">
		<div class="col-xs-4">
		</div>
    </div>

 
<div class=.container-fluid >
	{% for i in range(0, n_effects, 3) %}
	
	<div class="row">
		{% for j in range(0, 3) %}
		{% set k=i+j %}
			{% if n_effects > k %}
			<div class="col-sm-4"><dt><p>{{ side_effect_names[k] }}</p></dt>						
				<div class="radio-inline">
					<label>
						<input type="radio" name="{{ side_effect_names[k] }}" id="optionsRadios1" value=0 
						{% if pref_list[k] == 0 %} checked {% endif %} >Indif
				  </label>
				</div>
				<div class="radio-inline">
					<label>
						<input type="radio" name="{{ side_effect_names[k] }}" id="optionsRadios2" value=1
						{% if pref_list[k] == 1 %} checked {% endif %} >Tolerate
					</label>
				</div>
				<div class="radio-inline">
					<label>
						<input type="radio" name="{{ side_effect_names[k] }}" id="optionsRadios3" value=2
						{% if pref_list[k] == 2 %} checked {% endif %} >Avoid
					</label>
				</div>
			</div>
			{% endif %}
		{% endfor %}
	
	</div>


		{% endfor %}	
	</div>
	</form>

    </div>
  </div>
</div>


<img src="static/images/equipment_jarock.jpg" alt="Image Placeholder" height="800">


{% endblock %}


{% block footer %}
  {% include "include/footer.html" %}
{% endblock %}
